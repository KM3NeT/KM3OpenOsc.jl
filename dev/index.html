<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · KM3OpenOsc.jl</title><meta name="title" content="Home · KM3OpenOsc.jl"/><meta property="og:title" content="Home · KM3OpenOsc.jl"/><meta property="twitter:title" content="Home · KM3OpenOsc.jl"/><meta name="description" content="Documentation for KM3OpenOsc.jl."/><meta property="og:description" content="Documentation for KM3OpenOsc.jl."/><meta property="twitter:description" content="Documentation for KM3OpenOsc.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>KM3OpenOsc.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Documentation"><span>Documentation</span></a></li><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Quickstart"><span>Quickstart</span></a></li><li><a class="tocitem" href="#Quick-example-with-KM3NeT-Test-data"><span>Quick example with KM3NeT Test data</span></a></li><li><a class="tocitem" href="#License-and-Disclaimer"><span>License and Disclaimer</span></a></li></ul></li><li><a class="tocitem" href="api/">API</a></li><li><a class="tocitem" href="notebooks/example_read_and_plot/">Examples</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://git.km3net.de/common/KM3OpenOsc.jl" title="View the repository"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">Repository</span></a><a class="docs-navbar-link" href="https://git.km3net.de/common/KM3OpenOsc.jl/blob/main/README.md#L" title="Edit source"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="KM3OpenOsc.jl"><a class="docs-heading-anchor" href="#KM3OpenOsc.jl">KM3OpenOsc.jl</a><a id="KM3OpenOsc.jl-1"></a><a class="docs-heading-anchor-permalink" href="#KM3OpenOsc.jl" title="Permalink"></a></h1><p><a href="https://common.pages.km3net.de/KM3OpenOsc.jl/stable"><img src="https://img.shields.io/badge/docs-stable-blue.svg" alt="Stable"/></a> <a href="https://common.pages.km3net.de/KM3OpenOsc.jl/dev"><img src="https://img.shields.io/badge/docs-dev-blue.svg" alt="Dev"/></a> <a href="https://git.km3net.de/common/KM3OpenOsc.jl/pipelines"><img src="https://git.km3net.de/common/KM3OpenOsc.jl/badges/main/pipeline.svg" alt="Build Status"/></a> <a href="https://git.km3net.de/common/KM3OpenOsc.jl/commits/main"><img src="https://git.km3net.de/common/KM3OpenOsc.jl/badges/main/coverage.svg" alt="Coverage"/></a></p><p>Welcome to the <code>KM3OpenOsc.jl</code> repository!</p><h2 id="Documentation"><a class="docs-heading-anchor" href="#Documentation">Documentation</a><a id="Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation" title="Permalink"></a></h2><p>Check out the <strong><a href="https://common.pages.km3net.de/KM3OpenOsc.jl/dev">Latest Documention</a></strong> which also includes tutorials and examples.</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p><code>KM3OpenOsc.jl</code> is <strong>not an officially registered Julia package</strong> but it&#39;s available via the <strong><a href="https://git.km3net.de/common/julia-registry">KM3NeT Julia registry</a></strong>. To add the KM3NeT Julia registry to your local Julia registry list, follow the instructions in its <a href="https://git.km3net.de/common/julia-registry#adding-the-registry">README</a> or simply do</p><pre><code class="nohighlight hljs">git clone https://git.km3net.de/common/julia-registry ~/.julia/registries/KM3NeT</code></pre><p>After that, you can add <code>KM3OpenOsc.jl</code> just like any other Julia package:</p><pre><code class="nohighlight hljs">julia&gt; import Pkg; Pkg.add(&quot;KM3OpenOsc&quot;)</code></pre><h2 id="Quickstart"><a class="docs-heading-anchor" href="#Quickstart">Quickstart</a><a id="Quickstart-1"></a><a class="docs-heading-anchor-permalink" href="#Quickstart" title="Permalink"></a></h2><pre><code class="language-julia-repl hljs">julia&gt; using KM3OpenOsc</code></pre><h2 id="Quick-example-with-KM3NeT-Test-data"><a class="docs-heading-anchor" href="#Quick-example-with-KM3NeT-Test-data">Quick example with KM3NeT Test data</a><a id="Quick-example-with-KM3NeT-Test-data-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-example-with-KM3NeT-Test-data" title="Permalink"></a></h2><p>First we load the packages needed</p><pre><code class="language-julia hljs">using KM3OpenOsc
using KM3io
using KM3NeTTestData
using NuFlux</code></pre><p>Set up a couple of paths to load files from the test data</p><pre><code class="language-julia hljs">
OSCFILE = KM3NeTTestData.datapath(&quot;oscillations&quot;, &quot;ORCA6_433kt-y_opendata_v0.5_testdata.root&quot;)
BINDEF = KM3NeTTestData.datapath(&quot;oscillations&quot;, &quot;bins_433kt-y_v0.4.json&quot;)</code></pre><p>We can now load the open data file and check its contents</p><pre><code class="language-julia hljs">f = KM3io.OSCFile(OSCFILE)
nu = f.osc_opendata_nu
data = f.osc_opendata_data</code></pre><p>Given the file of binning definition we can create a set of histograms for reco and true fiven the datasample</p><pre><code class="language-julia hljs">hn = create_histograms(BINDEF)
hd = create_histograms(BINDEF)</code></pre><p>A set of oscillations parameters can be given as an argument for the <code>get_oscillation_matrices</code> function which computes matrices used to compute oscillations probabilities. This function uses <code>Neurthino.jl</code> behind the scenes</p><pre><code class="language-julia hljs">BF = Dict(&quot;dm_21&quot; =&gt; 7.42e-5, #ORCA 433 kt-y standard oscillations Best Fit
                       &quot;dm_31&quot; =&gt; 2.18e-3,
                       &quot;theta_12&quot; =&gt; deg2rad(33.45),
                       &quot;theta_23&quot; =&gt; deg2rad(45.57299599919429),
                       &quot;theta_13&quot; =&gt; deg2rad(8.62),
                       &quot;dcp&quot; =&gt; deg2rad(230))
U,H = get_oscillation_matrices(BF) # If no dict of parameters is provided NuFit is selected by default</code></pre><p>The package also allows to input any Honda flux for any site.  Local files may also be used, we just have to give the right path to the <code>get_flux_dict</code> function.</p><pre><code class="language-julia hljs">NUFLUX_PATH = split(Base.pathof(NuFlux), &quot;src&quot;)[1]
FLUX_DATA_DIR = joinpath(NUFLUX_PATH, &quot;data&quot;)
flux_path = joinpath(FLUX_DATA_DIR, &quot;frj-ally-20-12-solmin.d&quot;) # Get flux of Honda Frejus site from NuFlux

flux_dict = get_flux_dict(flux_path) # If no flux path is provided, Honda flux at frejus site is taken by default</code></pre><p>Once all the ingredients have been computed we can fill the initialized histograms. <code>fill_response!</code> will take care of filling all the empty histograms for true and reco quantities depending on the dataset given.</p><pre><code class="language-julia hljs">fill_response!(hn, nu, flux_dict, U, H; oscillations=true) # fill neutrinos ,need flux and oscillation parameters
fill_response!(hd, data) # fill data, don&#39;t need to specify much</code></pre><p>We can also export the histograms to HDF5 using the <code>export_histograms_hdf5</code> function:</p><pre><code class="language-julia hljs">export_histograms_hdf5(hn, &quot;neutrino_histograms_from_testdata.h5&quot;) # You can easily export the filled histograms to hdf5</code></pre><p>Additionally, the initial response file can be exported to HDF5 directly</p><pre><code class="language-julia hljs">h5f = build_HDF5_file(&quot;responses_to_file.h5&quot;) # Create h5 file with same structure as responses bins 
fill_HDF5_file!(h5f, nu, &quot;neutrinos&quot;) # Completely export the response as a table in an hdf5 file at a given path 
fill_HDF5_file!(h5f, data, &quot;data&quot;) # Completely export the response as a table in an hdf5 file at a given path 
close(h5f)</code></pre><h3 id="More-detailed-example"><a class="docs-heading-anchor" href="#More-detailed-example">More detailed example</a><a id="More-detailed-example-1"></a><a class="docs-heading-anchor-permalink" href="#More-detailed-example" title="Permalink"></a></h3><p>See an more detailed example on how to read and plot the data <a href="https://km3openosc-jl-fd9d00.pages.km3net.de/dev/notebooks/example_read_and_plot/">here</a>.</p><h2 id="License-and-Disclaimer"><a class="docs-heading-anchor" href="#License-and-Disclaimer">License and Disclaimer</a><a id="License-and-Disclaimer-1"></a><a class="docs-heading-anchor-permalink" href="#License-and-Disclaimer" title="Permalink"></a></h2><p>This project is licensed under the terms of the BSD 3-clause license. Be aware that KM3NeT is currently under construction and data taking and processing are still under development. The presented data have been tested to the best current standards. However, the KM3NeT collaboration gives no warranty for the re-use of the data and does not endorse any third-party scientific findings based on the use of the presented data.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="api/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.0 on <span class="colophon-date" title="Tuesday 13 May 2025 11:40">Tuesday 13 May 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
